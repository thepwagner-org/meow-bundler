name: Publish Gem
on:
  release:
    types: [created]

permissions:
  # for uploading artifacts to GitHub release
  contents: write

  # for trusted publishing and attest-build-provenance
  id-token: write

  # for attest-build-provenance
  attestations: write

jobs:
  publish:
    uses: Shopify/github-workflows/.github/workflows/rubygems-rake.yaml@bundler-rake
    with:
      environment: rubygems
